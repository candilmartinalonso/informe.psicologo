<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Prompts para el Psicólogo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Se recomienda mover los estilos a un CSS externo para caché, pero se mantienen in‑line por simplicidad */
        *, *::before, *::after { box-sizing: border-box; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg,#e0f7fa,#fce4ec);
            display:flex;justify-content:center;align-items:center;
            min-height:100vh;margin:0;padding:1rem;overflow-x:hidden;
        }
        .card {
            background:#fff;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.1);
            padding:2rem;max-width:600px;width:95%;animation:fadeIn .8s ease;
            display:flex;flex-direction:column;gap:1rem;transition:transform .3s,box-shadow .3s;
        }
        .card:hover{transform:translateY(-5px);box-shadow:0 12px 30px rgba(0,0,0,.15);}
        h1{margin-bottom:.5rem;color:#d81b60;text-align:center;font-size:1.8rem;animation:fadeIn 1s ease;}
        textarea{
            width:100%;height:160px;padding:.75rem;border:2px solid #ccc;border-radius:8px;
            resize:vertical;margin-bottom:.5rem;transition:border-color .3s,box-shadow .3s;animation:fadeIn 1.2s ease;
        }
        textarea:focus{border-color:#d81b60;box-shadow:0 0 8px rgba(216,27,96,.3);outline:none;}
        button{
            display:flex;justify-content:center;align-items:center;width:100%;padding:.75rem;background:#d81b60;color:#fff;
            border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background .3s,transform .3s,box-shadow .3s;animation:fadeIn 1.4s ease;
        }
        button:disabled{background:#f8bbd0;cursor:not-allowed;transform:none;box-shadow:none;}
        button:not(:disabled):hover{background:#c2185b;transform:translateY(-2px);box-shadow:0 4px 10px rgba(0,0,0,.2);}
        button:not(:disabled):active{transform:translateY(1px);box-shadow:0 2px 5px rgba(0,0,0,.2);} 
        #informe{margin-top:1rem;background:#fafafa;padding:1rem;border-left:4px solid #d81b60;border-radius:4px;white-space:pre-wrap;
            opacity:0;min-height:80px;overflow-y:auto;max-height:300px;word-break:break-word;}
        #informe.show{animation:slideInUp 1s ease forwards;}
        @media(max-width:640px){.card{padding:1.5rem;}h1{font-size:1.5rem;}textarea{height:120px;}}
    </style>
</head>
<body>
    <div class="card">
        <h1>Generador de Prompts para el Psicólogo</h1>
        <textarea id="entrada" placeholder="Describe cómo te sientes hoy, tus pensamientos y emociones."></textarea>
        <button id="generar" disabled>Generar Prompt para IA</button>
        <div id="informe"></div>
    </div>
    <script>
        // Cache de selectores
        const entradaEl=document.getElementById('entrada');
        const genBtn=document.getElementById('generar');
        const informeEl=document.getElementById('informe');

        // Debounce para evitar llamadas excesivas
        let debounceTimer;
        entradaEl.addEventListener('input',()=>{
            clearTimeout(debounceTimer);
            debounceTimer=setTimeout(()=>{
                genBtn.disabled=entradaEl.value.trim()==='';
            },300);
        });

        genBtn.addEventListener('click',()=>{
            const userText=entradaEl.value.trim();
            if(!userText) return;
            bloquearBoton(true);
            mostrarPrompt(generarPrompt(userText));
            bloquearBoton(false);
        });

        /** Genera el prompt optimizado */
        function generarPrompt(text){
            return `Eres mi voz interior conversando con mi psicólogo. Con base en estos pensamientos y emociones: "${text}" escribe en primera persona un párrafo breve, honesto y claro que describa cómo me siento ahora mismo. Evita saludos, despedidas o explicaciones adicionales.`;
        }

        /** Muestra el prompt resultante en pantalla */
        function mostrarPrompt(promptText){
            informeEl.textContent='';
            informeEl.classList.remove('show');
            informeEl.textContent=promptText;
            informeEl.classList.add('show');
        }

        function bloquearBoton(state){genBtn.disabled=state;}
    </script>
</body>
</html>
